# ğŸš€ Blueprint to Package Generator

Converts JSON blueprints from the **Instruction generation** system into complete **SAP CPI packages** ready for deployment.

## ğŸ“‹ What This Does

This script takes the JSON blueprints generated by the RAG Prime Instruction Generation system and converts them into complete SAP CPI packages with:

- âœ… **Complete BPMN XML** - Full integration flow definition
- âœ… **Package Structure** - Proper SAP CPI directory structure
- âœ… **Script Files** - Groovy scripts for processing logic
- âœ… **Mapping Files** - Message mappings for data transformation
- âœ… **Configuration Files** - Parameters and metadata
- âœ… **ZIP Package** - Ready for SAP CPI deployment

## ğŸ¯ How to Use

### 1. Basic Usage
```bash
cd "RAG Prime/package generation"
python blueprint_to_package_generator.py
```

### 2. Process Specific Blueprint
```bash
python blueprint_to_package_generator.py 1
```

### 3. Process All Blueprints
```bash
python blueprint_to_package_generator.py 2
```

## ğŸ“ Input Sources

The script automatically finds blueprints from:

1. **`RAG Prime/Instruction generation/Output json/`** - Generated blueprints
2. **`RAG Prime/Instruction generation/sample_perfect_blueprint.json`** - Sample blueprint

## ğŸ“¦ Output

- **ZIP files** are created in your **Downloads** folder
- **Package names** follow the pattern: `{blueprint_name}_package.zip`
- **Ready for SAP CPI** - Can be directly imported into SAP Integration Suite

## ğŸ”§ What Gets Generated

### Package Structure
```
{package_name}/
â”œâ”€â”€ META-INF/
â”‚   â””â”€â”€ MANIFEST.MF
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ scenarioflows/integrationflow/
â”‚   â”‚   â””â”€â”€ {package_name}.iflw
â”‚   â”œâ”€â”€ script/
â”‚   â”‚   â””â”€â”€ *.groovy
â”‚   â”œâ”€â”€ mapping/
â”‚   â”‚   â””â”€â”€ *.mmap
â”‚   â”œâ”€â”€ parameters.prop
â”‚   â””â”€â”€ parameters.propdef
â”œâ”€â”€ .project
â””â”€â”€ metainfo.prop
```

### BPMN Components
- **Start Events** - Message start events with HTTP endpoints
- **Service Tasks** - Content modifiers, scripts, request-reply
- **Gateways** - Exclusive gateways for conditional routing
- **End Events** - Message end events
- **Sequence Flows** - Proper component connections

### Asset Files
- **Groovy Scripts** - Processing logic with error handling
- **Message Mappings** - Data transformation definitions
- **Configuration** - Parameters and metadata

## ğŸ‰ Example Output

When you run the script, you'll see:

```
ğŸš€ Blueprint to Package Generator
==================================================
ğŸ“‹ Found 2 blueprint files:
   1. blueprint_20250929_171706.json
   2. sample_perfect_blueprint.json

ğŸš€ Processing blueprint: sample_perfect_blueprint.json
============================================================
ğŸ“‹ Loading blueprint: sample_perfect_blueprint.json
âœ… Blueprint loaded successfully
   ğŸ“¦ Package: sync_sap_s4hana_employee_validation
   ğŸ”„ Type: sync
   ğŸ¤– Components: 4
ğŸ—ï¸ Creating SAP CPI package: sync_sap_s4hana_employee_validation
ğŸ“ Generating BPMN XML from blueprint...
ğŸ“ Creating asset files from blueprint...
   âœ… Created script: Script_ValidationLogic.groovy
   âœ… Created script: employee_validation.groovy
   âœ… Created mapping: MessageMapping_Transform.mmap
   âœ… Created mapping: s4hana_to_successfactors_employee.mmap
ğŸ“ Created 2 script files and 2 mapping files
âœ… SAP CPI package created: output\sync_sap_s4hana_employee_validation.zip
ğŸ“¦ Package moved to: C:\Users\theka\Downloads\sample_perfect_blueprint_package.zip
```

## ğŸ”„ Integration with Instruction Generation

This script is designed to work seamlessly with the **RAG Prime Instruction Generation** system:

1. **Generate Blueprint** - Use `generate_blueprint.py` in Instruction generation
2. **Convert to Package** - Use this script to create SAP CPI packages
3. **Deploy** - Import the ZIP file into SAP Integration Suite

## ğŸ› ï¸ Technical Details

### Component Types Supported
- **ContentModifier/Enricher** - Context setting and property management
- **Script** - Groovy processing with validation logic
- **RequestReply** - External API calls and service integration
- **MessageMapping** - Data transformation and format conversion
- **ExclusiveGateway** - Conditional routing and decision logic

### BPMN Generation
- **Proper XML structure** following SAP CPI standards
- **Component connections** based on blueprint flow sequence
- **Visual diagram elements** for SAP CPI designer
- **Extension elements** with component properties

### Error Handling
- **Graceful fallbacks** for missing components
- **Default scripts** for script components
- **Default mappings** for mapping components
- **Comprehensive logging** throughout the process

## ğŸš¨ Requirements

- **Python 3.8+**
- **JSON blueprint files** from Instruction generation
- **Windows/Linux/Mac** compatible

## ğŸ“Š Success Metrics

The script provides detailed feedback:
- âœ… **Components processed** - Number of BPMN components created
- âœ… **Assets created** - Scripts and mappings generated
- âœ… **Package location** - Where the ZIP file was saved
- âœ… **Processing time** - How long the conversion took

## ğŸ¯ Next Steps

After generating packages:

1. **Import to SAP CPI** - Use the ZIP files in SAP Integration Suite
2. **Configure endpoints** - Update connection details
3. **Test integration** - Validate the flow works correctly
4. **Deploy** - Activate the integration flow

## ğŸ”§ Troubleshooting

### No Blueprints Found
- Ensure you have JSON files in `Instruction generation/Output json/`
- Check that the sample blueprint exists

### Encoding Issues
- The script handles Windows console encoding automatically
- If issues persist, run in a UTF-8 compatible terminal

### Package Creation Fails
- Check file permissions in the output directory
- Ensure sufficient disk space for ZIP creation

---

**ğŸ‰ Ready to convert your blueprints to SAP CPI packages!**
